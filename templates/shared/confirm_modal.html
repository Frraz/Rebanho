{# 
    Modal de confirmação reutilizável com Alpine.js
    
    Uso no template pai:
    {% include 'shared/confirm_modal.html' with
        modal_id="deletar-fazenda"
        titulo="Desativar Fazenda"
        mensagem="Tem certeza que deseja desativar esta fazenda?"
        action_url=fazenda.get_delete_url
        btn_label="Sim, desativar"
        btn_color="red"
    %}
    
    Trigger do botão:
    <button @click="$dispatch('open-modal', {id: 'deletar-fazenda'})">Desativar</button>
#}

<div x-data="{ open: false }"
     @open-modal.window="open = ($event.detail.id === '{{ modal_id }}')"
     @keydown.escape.window="open = false"
     x-show="open"
     x-cloak
     class="fixed inset-0 z-50 overflow-y-auto"
     role="dialog" aria-modal="true">

    <!-- Overlay -->
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"
         x-show="open"
         x-transition:enter="ease-out duration-200"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="ease-in duration-150"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         @click="open = false">
    </div>

    <!-- Modal -->
    <div class="flex min-h-full items-center justify-center p-4">
        <div class="relative bg-white rounded-xl shadow-xl w-full max-w-md p-6"
             x-show="open"
             x-transition:enter="ease-out duration-200"
             x-transition:enter-start="opacity-0 scale-95"
             x-transition:enter-end="opacity-100 scale-100"
             x-transition:leave="ease-in duration-150"
             x-transition:leave-start="opacity-100 scale-100"
             x-transition:leave-end="opacity-0 scale-95"
             @click.stop>

            <!-- Ícone -->
            <div class="flex items-center justify-center w-12 h-12 rounded-full mx-auto mb-4
                {% if btn_color == 'red' %}bg-red-100{% else %}bg-yellow-100{% endif %}">
                {% if btn_color == 'red' %}
                <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                </svg>
                {% else %}
                <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                {% endif %}
            </div>

            <!-- Conteúdo -->
            <h3 class="text-lg font-semibold text-gray-900 text-center mb-2">{{ titulo }}</h3>
            <p class="text-sm text-gray-500 text-center mb-6">{{ mensagem }}</p>

            <!-- Ações -->
            <div class="flex gap-3">
                <button @click="open = false"
                    class="flex-1 px-4 py-2.5 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors">
                    Cancelar
                </button>
                <form method="post" action="{{ action_url }}" class="flex-1">
                    {% csrf_token %}
                    <button type="submit"
                        class="w-full px-4 py-2.5 rounded-lg text-sm font-medium text-white transition-colors
                            {% if btn_color == 'red' %}bg-red-600 hover:bg-red-700
                            {% else %}bg-yellow-500 hover:bg-yellow-600{% endif %}">
                        {{ btn_label|default:"Confirmar" }}
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>