{# Barra de busca reutilizável #}
{# Uso: {% include 'shared/search_bar.html' with placeholder="Buscar fazenda..." %} #}

<form method="get" class="flex gap-2">
    {# Preservar outros parâmetros GET (filtros ativos) #}
    {% for key, value in request.GET.items %}
        {% if key != 'q' and key != 'page' %}
        <input type="hidden" name="{{ key }}" value="{{ value }}">
        {% endif %}
    {% endfor %}
    
    <div class="relative flex-1">
        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <svg class="h-4 w-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
            </svg>
        </div>
        <input type="search" name="q" value="{{ search_term }}"
            class="block w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
            placeholder="{{ placeholder|default:'Buscar...' }}"
            autocomplete="off">
    </div>
    <button type="submit"
        class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg transition-colors">
        Buscar
    </button>
    {% if search_term %}
    <a href="?{% for key, value in request.GET.items %}{% if key != 'q' and key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}"
       class="px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-600 hover:bg-gray-50 transition-colors">
        ✕ Limpar
    </a>
    {% endif %}
</form>